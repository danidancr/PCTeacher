{% extends "conteudo-base.html" %}

{% block title %}M√≥dulo 6: Projeto Final{% endblock %}

{% block content_title %}
    <i class="fas fa-rocket text-primary-indigo mr-2"></i> M√≥dulo 6: Projeto Final - Aplicando o PC
{% endblock %}

{% block content %}
    <div class="content-section">
        <h2 class="text-2xl font-semibold text-primary-indigo mb-4 flex items-center">
            <i class="fas fa-video mr-3"></i> V√≠deo Aula: Montando e Avaliando o Projeto
        </h2>
        <div class="video-container">
            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <p class="text-gray-700 mt-4">Aprenda a juntar as quatro partes do Pensamento Computacional para resolver seu desafio.</p>
    </div>

    <div class="content-section border-4 border-indigo-300 bg-white shadow-lg">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-3xl font-bold text-gray-800">üìã Resumo do Projeto Final: <span class="text-primary-indigo">{{ projeto_data.nome_projeto | default('Projeto N√£o Nomeado') }}</span></h2>
            {# Feedback de salvamento ser√° atualizado pelo JS da base_dashboard #}
            <span id="project-save-feedback" class="text-sm font-semibold opacity-0 transition-opacity"></span>
        </div>
        
        <p class="text-gray-700 mb-6">Revise e finalize as quatro etapas do Pensamento Computacional que voc√™ desenvolveu. Todas as edi√ß√µes feitas aqui s√£o salvas automaticamente.</p>

        {# Formul√°rio principal com campos de revis√£o #}
        <form id="project-form-modulo-6" method="POST" onchange="saveProjectData(this)">
            <input type="hidden" name="modulo_slug" value="{{ modulo.slug }}">
            
            {# Se√ß√£o 1: Decomposi√ß√£o #}
            <div class="mb-8 p-5 border border-red-200 rounded-lg bg-red-50">
                <h3 class="text-xl font-bold text-red-700 mb-3 flex items-center">
                    <i class="fas fa-sitemap mr-3"></i> 1. Decomposi√ß√£o (M√≥dulo 2)
                </h3>
                <label for="decomposicao" class="block text-gray-800 font-medium mb-2">Problema dividido em partes menores (subproblemas):</label>
                <textarea id="decomposicao" name="decomposicao" rows="5" 
                          class="w-full p-3 border border-red-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500" 
                          required>
                    {{ projeto_data.decomposicao | default('Ainda n√£o preenchido no M√≥dulo 2.') }}
                </textarea>
            </div>

            {# Se√ß√£o 2: Reconhecimento de Padr√µes #}
            <div class="mb-8 p-5 border border-yellow-200 rounded-lg bg-yellow-50">
                <h3 class="text-xl font-bold text-yellow-700 mb-3 flex items-center">
                    <i class="fas fa-lightbulb mr-3"></i> 2. Reconhecimento de Padr√µes (M√≥dulo 3)
                </h3>
                <label for="padroes" class="block text-gray-800 font-medium mb-2">Similaridades, tend√™ncias ou repeti√ß√µes identificadas:</label>
                <textarea id="padroes" name="padroes" rows="5" 
                          class="w-full p-3 border border-yellow-300 rounded-lg shadow-sm focus:ring-yellow-500 focus:border-yellow-500" 
                          required>
                    {{ projeto_data.padroes | default('Ainda n√£o preenchido no M√≥dulo 3.') }}
                </textarea>
            </div>

            {# Se√ß√£o 3: Abstra√ß√£o #}
            <div class="mb-8 p-5 border border-indigo-200 rounded-lg bg-indigo-50">
                <h3 class="text-xl font-bold text-indigo-700 mb-3 flex items-center">
                    <i class="fas fa-filter mr-3"></i> 3. Abstra√ß√£o (M√≥dulo 4)
                </h3>
                <label for="abstracao" class="block text-gray-800 font-medium mb-2">Modelo essencial e detalhes irrelevantes ignorados:</label>
                <textarea id="abstracao" name="abstracao" rows="5" 
                          class="w-full p-3 border border-indigo-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500" 
                          required>
                    {{ projeto_data.abstracao | default('Ainda n√£o preenchido no M√≥dulo 4.') }}
                </textarea>
            </div>

            {# Se√ß√£o 4: Algoritmos #}
            <div class="mb-8 p-5 border border-green-200 rounded-lg bg-green-50">
                <h3 class="text-xl font-bold text-green-700 mb-3 flex items-center">
                    <i class="fas fa-list-ol mr-3"></i> 4. Algoritmos (M√≥dulo 5)
                </h3>
                <label for="algoritmo" class="block text-gray-800 font-medium mb-2">Sequ√™ncia l√≥gica de passos (SE/ENT√ÉO, ENQUANTO/PARA):</label>
                <textarea id="algoritmo" name="algoritmo" rows="8" 
                          class="w-full p-3 border border-green-300 rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500" 
                          required>
                    {{ projeto_data.algoritmo | default('Ainda n√£o preenchido no M√≥dulo 5.') }}
                </textarea>
                <p class="mt-1 text-xs text-gray-600">Seu progresso ser√° salvo automaticamente.</p>
            </div>
            
            <div class="text-center mt-6">
                <button type="submit" class="btn-primary py-3 px-8 text-lg font-semibold bg-primary-indigo hover:bg-indigo-700">
                    <i class="fas fa-save mr-2"></i> Salvar Revis√£o Final
                </button>
            </div>
        </form>
    </div>
{% endblock %}

{% block finish_button %}
    <div class="flex justify-end pt-8">
        <form method="POST" action="{{ url_for('concluir_modulo', modulo_nome='projeto-final') }}">
            <button type="submit" class="btn-finish-big">
                <i class="fas fa-award mr-2"></i> Finalizar Projeto e Gerar Certificado
            </button>
        </form>
    </div>
{% endblock %}
