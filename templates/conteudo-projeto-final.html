{% extends "conteudo-base.html" %}

{% block title %}Módulo 6: Projeto Final{% endblock %}

{% block content_title %}Módulo 6: Projeto Final - Aplicando o PC{% endblock %}

{% block content %}
    <div class="content-section">
        <h2 class="text-2xl font-semibold text-primary-indigo mb-4 flex items-center">
            <i class="fas fa-video mr-3"></i> Vídeo Aula: Montando e Avaliando o Projeto
        </h2>
        <div class="video-container">
            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <p class="text-gray-500 mt-4">Aprenda a juntar as quatro partes do Pensamento Computacional para resolver seu desafio.</p>
    </div>

    <div class="content-section border-4 border-primary-indigo bg-indigo-50">
        <h2 class="text-2xl font-semibold text-primary-indigo mb-4 flex items-center">
            <i class="fas fa-cogs mr-3"></i> Seu Plano de Projeto Integrado
        </h2>
        <p class="text-gray-700 mb-4 font-semibold">Aqui você verá as respostas que forneceu em cada módulo, formando o seu plano de ação:</p>
        
        <div class="space-y-4 text-sm">
            {# ALTERAÇÃO: Dados do Módulo 1 (Introdução) #}
            <div class="p-3 border rounded-lg bg-white">
                <strong class="text-primary-indigo">Módulo 1 - Introdução:</strong> 
                <p class="mt-1 text-gray-700 italic" id="proj-mod0">
                    <span class="font-bold">Nome:</span> {{ project_data.project_name if project_data.project_name else 'Não definido.' }}<br>
                    <span class="font-bold">Objetivo:</span> {{ project_data.project_objective if project_data.project_objective else 'Não definido.' }}<br>
                    <span class="font-bold">Público-Alvo:</span> {{ project_data.project_target if project_data.project_target else 'Não definido.' }}
                </p>
            </div>
            
            {# ALTERAÇÃO: Dados do Módulo 2 (Decomposição/Justificativa) #}
            <div class="p-3 border rounded-lg bg-white">
                <strong class="text-primary-indigo">Módulo 2 - Decomposição (Justificativa):</strong> 
                <p class="mt-1 text-gray-700 italic" id="proj-mod1">
                    {{ project_data.project_justification if project_data.project_justification else 'Nenhum dado salvo no Módulo 2.' }}
                </p>
            </div>
            
            {# ALTERAÇÃO: Dados do Módulo 3 (Padrões/Otimização) #}
            <div class="p-3 border rounded-lg bg-white">
                <strong class="text-primary-indigo">Módulo 3 - Padrões (Otimização):</strong> 
                <p class="mt-1 text-gray-700 italic" id="proj-mod2">
                    {{ project_data.project_pattern_optimization if project_data.project_pattern_optimization else 'Nenhum dado salvo no Módulo 3.' }}
                </p>
            </div>
            
            {# ALTERAÇÃO: Dados do Módulo 4 (Abstração) #}
            <div class="p-3 border rounded-lg bg-white">
                <strong class="text-primary-indigo">Módulo 4 - Abstração (Modelo Essencial):</strong> 
                <p class="mt-1 text-gray-700 italic" id="proj-mod3">
                    {{ project_data.project_abstraction if project_data.project_abstraction else 'Nenhum dado salvo no Módulo 4.' }}
                </p>
            </div>
            
            {# ALTERAÇÃO: Dados do Módulo 5 (Algoritmo) #}
            <div class="p-3 border rounded-lg bg-white">
                <strong class="text-primary-indigo">Módulo 5 - Algoritmo (Solução/Fluxo de Ações):</strong> 
                <p class="mt-1 text-gray-700 italic whitespace-pre-wrap" id="proj-mod4">
                    {{ project_data.project_algorithm if project_data.project_algorithm else 'Nenhum dado salvo no Módulo 5.' }}
                </p>
            </div>
        </div>

        <p class="mt-6 text-gray-800">Seu desafio final é revisar e consolidar este plano. Salve-o como seu Projeto Final. (A lógica de carregamento e salvamento deve ser implementada com Firestore).</p>
    </div>

    {% endblock %}

{% block finish_button %}
    <div class="mt-8 text-center">
        {# ALTERAÇÃO: Rota atualizada para a função 'concluir_modulo' no app.py #}
        <form method="POST" action="{{ url_for('concluir_modulo', modulo_nome='projeto-final') }}">
            <button type="submit" class="btn-finish hover:shadow-lg">
                <i class="fas fa-trophy mr-2"></i> Finalizar Curso e Gerar Certificado!
            </button>
        </form>
    </div>
{% endblock %}
