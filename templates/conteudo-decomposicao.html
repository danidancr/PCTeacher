{% extends "conteudo-base.html" %}

{% block title %}M√≥dulo 2: Decomposi√ß√£o{% endblock %}

{% block content_title %}
    <i class="fas fa-puzzle-piece text-primary-indigo mr-2"></i> M√≥dulo 2: A Arte da Decomposi√ß√£o
{% endblock %}

{% block content %}
    <div class="content-section">
        <h2 class="text-2xl font-semibold text-primary-indigo mb-4 flex items-center">
            <i class="fas fa-video mr-3"></i> V√≠deo Aula: Quebrando o Problema em Partes
        </h2>
        <div class="video-container">
            {# O v√≠deo permanece o mesmo placeholder, apenas para a estrutura do layout #}
            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <p class="text-gray-500 mt-4">Aprenda a simplificar qualquer desafio dividindo-o em subtarefas gerenci√°veis.</p>
    </div>
    
    <div class="content-section">
        <h2 class="text-2xl font-semibold text-primary-indigo mb-4 flex items-center">
            <i class="fas fa-clipboard-check mr-3"></i> Exerc√≠cios de Fixa√ß√£o
        </h2>
        <div class="space-y-6">
            
            <div id="q-mod1-1" class="border p-4 rounded-lg bg-white shadow">
                <p class="font-semibold text-sm mb-2 text-gray-500">Conceitual</p>
                <p class="font-semibold text-lg mb-4 text-gray-800">1. A decomposi√ß√£o √© v√°lida no √¢mbito educacional porque permite:</p>
                <div class="space-y-2">
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-1', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o mant√©m as rela√ß√µes entre as partes para que a solu√ß√£o final seja coerente.')" data-correct="false">
                        A) Tratar partes de um problema isoladamente, sem rela√ß√£o entre si.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-1', this, 'true', '‚úÖ Excelente! Decompor √© compreender a estrutura de um sistema complexo a partir da an√°lise das suas partes interconectadas, tornando o problema gerenci√°vel.')" data-correct="true">
                        B) Entender o todo a partir da an√°lise de suas partes interconectadas.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-1', this, 'false', '‚ùå Incorreto. O objetivo √© simplificar, mas mantendo todas as etapas cr√≠ticas.')" data-correct="false">
                        C) Reduzir a complexidade eliminando etapas cr√≠ticas.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-1', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o √©, fundamentalmente, uma ferramenta de planejamento.')" data-correct="false">
                        D) Resolver problemas sem planejamento pr√©vio.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-1', this, 'false', '‚ùå Incorreto. O PC exige reflex√£o constante sobre o processo.')" data-correct="false">
                        E) Repetir processos autom√°ticos sem reflex√£o.
                    </div>
                </div>
                <div class="feedback-message mt-4 hidden"></div>
            </div>
            <div id="q-mod1-2" class="border p-4 rounded-lg bg-white shadow">
                <p class="font-semibold text-sm mb-2 text-gray-500">Aplica√ß√£o Pedag√≥gica</p>
                <p class="font-semibold text-lg mb-4 text-gray-800">2. Em contextos educacionais, decompor um problema significa:</p>
                <div class="space-y-2">
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-2', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o √© o oposto da memoriza√ß√£o, pois foca na compreens√£o estrutural do conte√∫do.')" data-correct="false">
                        A) Reduzir o conte√∫do a t√≥picos de memoriza√ß√£o.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-2', this, 'true', '‚úÖ Correto! Decomposi√ß√£o, no ensino, transforma grandes objetivos em pequenas etapas de aprendizagem sequenciais e interligadas.')" data-correct="true">
                        B) Planejar etapas did√°ticas coerentes e complementares.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-2', this, 'false', '‚ùå Incorreto. O foco √© na conex√£o, e n√£o na fragmenta√ß√£o do conhecimento.')" data-correct="false">
                        C) Fragmentar o conhecimento sem conex√£o.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-2', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o √© uma habilidade de racioc√≠nio, n√£o um m√©todo de c√°lculo.')" data-correct="false">
                        D) Aplicar f√≥rmulas matem√°ticas a problemas sociais.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-2', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o exige que se foque tanto no processo quanto no produto final.')" data-correct="false">
                        E) Focar apenas no produto final.
                    </div>
                </div>
                <div class="feedback-message mt-4 hidden"></div>
            </div>
            <div id="q-mod1-3" class="border p-4 rounded-lg bg-white shadow">
                <p class="font-semibold text-sm mb-2 text-gray-500">Desafios</p>
                <p class="font-semibold text-lg mb-4 text-gray-800">3. Um desafio da decomposi√ß√£o √©:</p>
                <div class="space-y-2">
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-3', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o deve ser revisada e ajustada conforme o andamento do processo.')" data-correct="false">
                        A) N√£o permitir revis√£o dos subproblemas.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-3', this, 'true', '‚úÖ Perfeito! O maior desafio √© garantir que as rela√ß√µes entre as partes funcionem corretamente para alcan√ßar o objetivo geral.')" data-correct="true">
                        B) Requerer an√°lise constante das rela√ß√µes entre partes.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-3', this, 'false', '‚ùå Incorreto. Pelo contr√°rio, ela facilita o trabalho colaborativo ao atribuir subtarefas.')" data-correct="false">
                        C) Impedir o trabalho colaborativo.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-3', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o busca entender as interdepend√™ncias para garantir a solu√ß√£o final.')" data-correct="false">
                        D) Eliminar as interdepend√™ncias.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-3', this, 'false', '‚ùå Incorreto. √â aplic√°vel a todos os contextos da vida e do ensino.')" data-correct="false">
                        E) Ser aplic√°vel apenas em contextos tecnol√≥gicos.
                    </div>
                </div>
                <div class="feedback-message mt-4 hidden"></div>
            </div>
            <div id="q-mod1-4" class="border p-4 rounded-lg bg-white shadow">
                <p class="font-semibold text-sm mb-2 text-gray-500">Falha na Aplica√ß√£o</p>
                <p class="font-semibold text-lg mb-4 text-gray-800">4. Quando a decomposi√ß√£o falha, o problema costuma estar em:</p>
                <div class="space-y-2">
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-4', this, 'false', '‚ùå Incorreto. O trabalho em equipe costuma ser positivo para a decomposi√ß√£o.')" data-correct="false">
                        A) Excesso de colabora√ß√£o.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-4', this, 'true', '‚úÖ Exato! A falta de clareza nas partes (subproblemas) impede que o processo de montagem final funcione.')" data-correct="true">
                        B) Falta de clareza na defini√ß√£o dos subproblemas.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-4', this, 'false', '‚ùå Incorreto. A divis√£o √© necess√°ria; o problema √© a fragmenta√ß√£o sem prop√≥sito.')" data-correct="false">
                        C) Divis√£o excessiva do conte√∫do.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-4', this, 'false', '‚ùå Incorreto. Revis√µes s√£o ben√©ficas.')" data-correct="false">
                        D) N√∫mero elevado de revis√µes.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-4', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o √© um processo mental, n√£o dependente de tecnologia.')" data-correct="false">
                        E) Falta de recursos tecnol√≥gicos.
                    </div>
                </div>
                <div class="feedback-message mt-4 hidden"></div>
            </div>
            <div id="q-mod1-5" class="border p-4 rounded-lg bg-white shadow">
                <p class="font-semibold text-sm mb-2 text-gray-500">Metodologia</p>
                <p class="font-semibold text-lg mb-4 text-gray-800">5. Em um planejamento did√°tico, a decomposi√ß√£o pode auxiliar na:</p>
                <div class="space-y-2">
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-5', this, 'false', '‚ùå Incorreto. O termo "fragmenta√ß√£o" sugere divis√£o sem sentido; a decomposi√ß√£o busca conex√µes.')" data-correct="false">
                        A) Fragmenta√ß√£o do conhecimento.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-5', this, 'true', '‚úÖ Exato! A decomposi√ß√£o √© a base para criar um fluxo de ensino progressivo e interligado, ou seja, sequ√™ncias did√°ticas coerentes.')" data-correct="true">
                        B) Organiza√ß√£o de sequ√™ncias did√°ticas coerentes.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-5', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o foca em como resolver o problema, e n√£o em eliminar etapas.')" data-correct="false">
                        C) Elimina√ß√£o de conte√∫dos secund√°rios.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-5', this, 'false', '‚ùå Incorreto. As etapas avaliativas s√£o subproblemas importantes que precisam ser decompostos.')" data-correct="false">
                        D) Exclus√£o de etapas avaliativas.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod1-5', this, 'false', '‚ùå Incorreto. O objetivo √© dar ao aluno autonomia sobre as partes do processo.')" data-correct="false">
                        E) Redu√ß√£o da autonomia discente.
                    </div>
                </div>
                <div class="feedback-message mt-4 hidden"></div>
            </div>
        </div>
    </div>

    {# ========================================================= #}
    {# SE√á√ÉO DE PROJETO (JUSTIFICATIVA) - AJUSTADA PARA A L√ìGICA FLASK/AJAX #}
    {# ========================================================= #}
    <div class="content-section bg-indigo-50 border-indigo-300">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-2xl font-semibold text-primary-indigo">üìù Meu Projeto: Justificativa</h2>
            {# Este span ser√° atualizado pela fun√ß√£o JavaScript saveProjectData na base_dashboard.html #}
            <span id="project-save-feedback" class="text-sm font-semibold opacity-0 transition-opacity"></span>
        </div>
        
        <p class="text-gray-700 mb-4">Com base no conceito de **Decomposi√ß√£o de Problemas**, explique a relev√¢ncia e a necessidade do seu projeto (definido no M√≥dulo 1).</p>
        
        {# O ID do formul√°rio √© usado para o JavaScript, mas o 'onchange' garante o salvamento ass√≠ncrono. #}
        <form id="project-form-decomposicao" method="POST" onchange="saveProjectData(this)">
            
            <h3 class="text-xl font-semibold text-gray-800 mb-3">Justificativa do Projeto</h3>

            <div class="mb-4">
                <label for="justificativa" class="block text-gray-800 font-medium mb-2">Descreva a relev√¢ncia do seu projeto, respondendo: Qual problema ele resolve e por que ele √© importante para o seu p√∫blico-alvo?</label>
                <textarea id="justificativa" name="justificativa" rows="6" 
                          class="w-full p-3 border border-indigo-300 rounded-lg shadow-sm focus:ring-primary-indigo focus:border-primary-indigo" 
                          placeholder="Ex: O projeto √© crucial para preencher a lacuna na alfabetiza√ß√£o digital, preparando os alunos para o mercado futuro.">
                    {# Carrega o valor salvo do banco de dados, se existir #}
                    {{ projeto_data.justificativa | default('') }}
                </textarea>
                <p class="mt-1 text-xs text-gray-500">Seu progresso ser√° salvo automaticamente.</p>
            </div>
            
            {# Bot√£o de salvamento vis√≠vel, mas o salvamento principal √© por onchange. #}
            <button type="submit" class="mt-4 hidden sm:inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-indigo hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-indigo">
                Salvar Justificativa
            </button>
            
        </form>
    </div>
{% endblock %}

{% block finish_button %}
    <div class="flex justify-end pt-4">
        {# Usando 'modulo.slug' que √© injetado pelo Flask para garantir a rota correta #}
        <form method="POST" action="{{ url_for('concluir_modulo', modulo_nome=modulo.slug) }}">
            <button type="submit" class="btn-finish">
                <i class="fas fa-check-double mr-2"></i> Concluir M√≥dulo 2: Decomposi√ß√£o
            </button>
        </form>
    </div>
{% endblock %}
