{% extends "conteudo-base.html" %}

{% block title %}M√≥dulo 3: Reconhecimento de Padr√µes{% endblock %}

{% block content_title %}
    <i class="fas fa-search-plus text-primary-indigo mr-2"></i> M√≥dulo 3: Reconhecimento de Padr√µes
{% endblock %}

{% block content %}
    <div class="content-section">
        <h2 class="text-2xl font-semibold text-primary-indigo mb-4 flex items-center">
            <i class="fas fa-video mr-3"></i> V√≠deo Aula: Identificando Semelhan√ßas
        </h2>
        <div class="video-container">
            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <p class="text-gray-500 mt-4">Encontrar padr√µes em dados e eventos √© o primeiro passo para criar solu√ß√µes gen√©ricas e eficientes.</p>
    </div>

    <div class="content-section">
        <h2 class="text-2xl font-semibold text-primary-indigo mb-4 flex items-center">
            <i class="fas fa-clipboard-check mr-3"></i> Exerc√≠cios de Fixa√ß√£o
        </h2>
        <div class="space-y-6">
            
            <div id="q-mod2-1" class="border p-4 rounded-lg bg-white shadow">
                <p class="font-semibold text-sm mb-2 text-gray-500">Conceitual</p>
                <p class="font-semibold text-lg mb-4 text-gray-800">1. Por que a identifica√ß√£o de padr√µes √© crucial ap√≥s a decomposi√ß√£o de um problema?</p>
                <div class="space-y-2">
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-1', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o j√° quebrou o problema; o padr√£o serve para encontrar similaridades, n√£o para re-dividir.')" data-correct="false">
                        A) Para re-dividir o problema em etapas ainda menores.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-1', this, 'true', '‚úÖ Correto! Padr√µes permitem a cria√ß√£o de uma solu√ß√£o √∫nica e gen√©rica (abstra√ß√£o) que pode ser aplicada a todas as subtarefas semelhantes.')" data-correct="true">
                        B) Para criar solu√ß√µes gen√©ricas que podem ser aplicadas a v√°rias subtarefas semelhantes.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-1', this, 'false', '‚ùå Incorreto. A identifica√ß√£o de padr√µes pode simplificar, mas o objetivo prim√°rio √© a otimiza√ß√£o da solu√ß√£o.')" data-correct="false">
                        C) Para garantir que o problema n√£o tenha detalhes irrelevantes.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-1', this, 'false', '‚ùå Incorreto. Algoritmos √© o pr√≥ximo passo. O padr√£o √© a ponte entre a decomposi√ß√£o e a abstra√ß√£o/algoritmo.')" data-correct="false">
                        D) Para gerar o algoritmo final sem precisar de mais etapas.
                    </div>
                </div>
                <div class="feedback-message mt-4 hidden"></div>
            </div>
            <div id="q-mod2-2" class="border p-4 rounded-lg bg-white shadow">
                <p class="font-semibold text-sm mb-2 text-gray-500">Aplica√ß√£o Pedag√≥gica</p>
                <p class="font-semibold text-lg mb-4 text-gray-800">2. Em um conjunto de provas de matem√°tica, 80% dos alunos cometeram erros na mesma f√≥rmula. Qual a√ß√£o demonstra o reconhecimento e uso de um padr√£o?</p>
                <div class="space-y-2">
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-2', this, 'false', '‚ùå Incorreto. Isso √© Decomposi√ß√£o, n√£o reconhecimento de padr√µes. O padr√£o j√° est√° estabelecido (erro na f√≥rmula).')" data-correct="false">
                        A) Criar 10 provas diferentes para evitar que os alunos copiem as respostas.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-2', this, 'false', '‚ùå Incorreto. Essa √© uma resposta individualizada, n√£o uma otimiza√ß√£o sist√™mica baseada no padr√£o do erro.')" data-correct="false">
                        B) Devolver as provas e pedir que cada aluno revise seus pr√≥prios erros.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-2', this, 'false', '‚ùå Incorreto. A abstra√ß√£o viria ap√≥s identificar o erro recorrente, focando no princ√≠pio por tr√°s da f√≥rmula, mas a a√ß√£o ainda n√£o demonstra o uso do padr√£o.')" data-correct="false">
                        C) Explicar aos alunos o conceito fundamental por tr√°s da f√≥rmula, ignorando a parte pr√°tica.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-2', this, 'true', '‚úÖ Correto! Ao notar que o erro √© comum, o professor aplica uma solu√ß√£o centralizada (revis√£o da f√≥rmula) que aborda o ponto fraco de forma eficiente.')" data-correct="true">
                        D) Interromper a pr√≥xima aula para fazer uma revis√£o coletiva focada apenas na aplica√ß√£o correta daquela f√≥rmula.
                    </div>
                </div>
                <div class="feedback-message mt-4 hidden"></div>
            </div>
            <div id="q-mod2-3" class="border p-4 rounded-lg bg-white shadow">
                <p class="font-semibold text-sm mb-2 text-gray-500">Desenvolvimento de Habilidade</p>
                <p class="font-semibold text-lg mb-4 text-gray-800">3. A repeti√ß√£o intencional de um mesmo tipo de exerc√≠cio (com dados diferentes) para que o aluno internalize uma regra ou m√©todo √© uma aplica√ß√£o did√°tica direta de qual pilar do Pensamento Computacional?</p>
                <div class="space-y-2">
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-3', this, 'false', '‚ùå Incorreto. Abstra√ß√£o √© a simplifica√ß√£o; a repeti√ß√£o √© a pr√°tica de encontrar e aplicar a regra.')" data-correct="false">
                        A) Abstra√ß√£o.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-3', this, 'true', '‚úÖ Exato! O aluno pratica o reconhecimento de que, apesar dos n√∫meros diferentes, o m√©todo (o padr√£o) para a solu√ß√£o √© sempre o mesmo.')" data-correct="true">
                        B) Reconhecimento de Padr√µes.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-3', this, 'false', '‚ùå Incorreto. Decomposi√ß√£o √© a quebra do problema; aqui, a √™nfase √© na solu√ß√£o recorrente.')" data-correct="false">
                        C) Decomposi√ß√£o.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-3', this, 'false', '‚ùå Incorreto. Algoritmos √© a sequ√™ncia de passos; o Reconhecimento de Padr√µes √© que define qual sequ√™ncia usar.')" data-correct="false">
                        D) Algoritmos.
                    </div>
                </div>
                <div class="feedback-message mt-4 hidden"></div>
            </div>
            <div id="q-mod2-4" class="border p-4 rounded-lg bg-white shadow">
                <p class="font-semibold text-sm mb-2 text-gray-500">Rela√ß√£o entre Pilares</p>
                <p class="font-semibold text-lg mb-4 text-gray-800">4. Qual √© o pilar do Pensamento Computacional que, obrigatoriamente, precede o reconhecimento de padr√µes?</p>
                <div class="space-y-2">
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-4', this, 'false', '‚ùå Incorreto. A Abstra√ß√£o vem ap√≥s o reconhecimento do padr√£o (para simplificar o m√©todo), mas a Decomposi√ß√£o vem antes.')" data-correct="false">
                        A) Abstra√ß√£o.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-4', this, 'false', '‚ùå Incorreto. Algoritmos √© o resultado final. O padr√£o √© que permite a cria√ß√£o de um algoritmo.')" data-correct="false">
                        B) Algoritmos.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-4', this, 'true', '‚úÖ Correto! √â preciso decompor o problema em partes para que se possa, ent√£o, comparar essas partes e identificar padr√µes (semelhan√ßas).')" data-correct="true">
                        C) Decomposi√ß√£o.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-4', this, 'false', '‚ùå Incorreto. Depura√ß√£o √© um processo de corre√ß√£o que pode ocorrer em qualquer fase.')" data-correct="false">
                        D) Depura√ß√£o (Debugging).
                    </div>
                </div>
                <div class="feedback-message mt-4 hidden"></div>
            </div>
            <div id="q-mod2-5" class="border p-4 rounded-lg bg-white shadow">
                <p class="font-semibold text-sm mb-2 text-gray-500">Benef√≠cio Principal</p>
                <p class="font-semibold text-lg mb-4 text-gray-800">5. O principal benef√≠cio do reconhecimento de padr√µes para o pensamento humano √©:</p>
                <div class="space-y-2">
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-5', this, 'false', '‚ùå Incorreto. O foco √© na efici√™ncia e na generaliza√ß√£o, n√£o na memoriza√ß√£o.')" data-correct="false">
                        A) Facilitar a memoriza√ß√£o de fatos.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-5', this, 'false', '‚ùå Incorreto. Embora √∫til, a detec√ß√£o de anomalias √© uma fun√ß√£o secund√°ria do reconhecimento de padr√µes.')" data-correct="false">
                        B) Permitir a detec√ß√£o de anomalias e erros.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-5', this, 'false', '‚ùå Incorreto. A decomposi√ß√£o √© quem trata a complexidade; o padr√£o traz a efici√™ncia.')" data-correct="false">
                        C) Tornar os problemas mais complexos.
                    </div>
                    <div class="quiz-option bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200"
                        onclick="checkAnswer('q-mod2-5', this, 'true', '‚úÖ Perfeito! Ao reconhecer padr√µes, o c√©rebro n√£o precisa resolver o problema do zero toda vez, o que economiza tempo e recursos cognitivos (generaliza√ß√£o).')" data-correct="true">
                        D) Permitir a generaliza√ß√£o de solu√ß√µes, aumentando a efici√™ncia.
                    </div>
                </div>
                <div class="feedback-message mt-4 hidden"></div>
            </div>
        </div>
    </div>

    {# ========================================================= #}
    {# SE√á√ÉO DE PROJETO (OTIMIZA√á√ÉO DE PADR√ïES) - AJUSTADA PARA A L√ìGICA FLASK/AJAX #}
    {# ========================================================= #}
    <div class="content-section bg-indigo-50 border-indigo-300">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-2xl font-semibold text-primary-indigo">üß† Meu Projeto: Otimiza√ß√£o por Padr√µes</h2>
            {# Este span ser√° atualizado pela fun√ß√£o JavaScript saveProjectData na base_dashboard.html #}
            <span id="project-save-feedback" class="text-sm font-semibold opacity-0 transition-opacity"></span>
        </div>
        
        <p class="text-gray-700 mb-4">Relembre as subpartes do seu projeto (decomposi√ß√£o) e encontre similaridades. Use a identifica√ß√£o de padr√µes para otimizar a metodologia.</p>
        
        {# O ID do formul√°rio √© usado para o JavaScript, e o 'onchange' garante o salvamento ass√≠ncrono. #}
        {# O campo 'name' deve ser um nome de campo v√°lido no banco de dados, e o formul√°rio usa 'project-form-modulo-3' para o AJAX. #}
        <form id="project-form-modulo-3" method="POST" onchange="saveProjectData(this)">
            
            <h3 class="text-xl font-semibold text-gray-800 mb-3">Identifica√ß√£o e Otimiza√ß√£o de Padr√µes</h3>
            
            {# Informa√ß√£o de contexto do projeto (Nome do Projeto do M√≥dulo 1) #}
            <p id="project-name-display" class="text-sm italic text-gray-600 mb-4">
                Projeto Atual: **{{ projeto_data.nome_projeto | default('Projeto Sem Nome') }}**
            </p>

            <div class="mb-4">
                <label for="otimizacao_padrao" class="block text-gray-800 font-medium mb-2">Identifique uma **a√ß√£o ou recurso** que se repete em diferentes fases do seu projeto. Como voc√™ pode criar um **mecanismo √∫nico** para reutilizar ou simplificar essa repeti√ß√£o?</label>
                <textarea id="otimizacao_padrao" name="otimizacao_padrao" rows="6" 
                          class="w-full p-3 border border-indigo-300 rounded-lg shadow-sm focus:ring-primary-indigo focus:border-primary-indigo" 
                          placeholder="Ex: A avalia√ß√£o formativa √© um padr√£o que se repete em 3 m√≥dulos. Podemos otimiz√°-la criando um √∫nico 'Template de Feedback' em vez de criar tr√™s documentos diferentes." required>
                    {# Carrega o valor salvo do banco de dados, se existir #}
                    {{ projeto_data.otimizacao_padrao | default('') }}
                </textarea>
                <p class="mt-1 text-xs text-gray-500">Seu progresso ser√° salvo automaticamente.</p>
            </div>
            
            {# Bot√£o de salvamento mantido, mas o onchange far√° o trabalho. #}
            <button type="submit" class="mt-4 hidden sm:inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-indigo hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-indigo">
                Salvar Otimiza√ß√£o de Padr√£o
            </button>
            
        </form>
    </div>
{% endblock %}

{% block finish_button %}
    <div class="flex justify-end pt-4">
        {# Usando 'modulo.slug' que √© injetado pelo Flask para garantir a rota correta #}
        <form method="POST" action="{{ url_for('concluir_modulo', modulo_nome=modulo.slug) }}">
            <button type="submit" class="btn-finish">
                <i class="fas fa-check-double mr-2"></i> Concluir M√≥dulo 3: Reconhecimento de Padr√µes
            </button>
        </form>
    </div>
{% endblock %}
